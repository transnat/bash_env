---
- name: '[filesystem]'
  become: true
  tags: ['filesystem']
  block:
    - name: '[filesystem.fstab] Update fstab file with tmpfs /tmp'
      tags: ['fstab']
      ansible.builtin.lineinfile:
        path: '/etc/fstab'
        regexp: 'tmpfs /tmp tmpfs'
        line: 'tmpfs /tmp tmpfs defaults,lazytime,noatime,nodiratime 0 0'
        state: 'present'
        backup: true

    - name: '[filesystem.fstrim] Discard trim enable'
      tags:
        - 'fstrim'
        - 'systemd'
      ansible.builtin.systemd:
        name: 'fstrim.timer'
        state: 'started'
        enabled: true
        daemon_reload: true
...
